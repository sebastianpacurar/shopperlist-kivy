#: include app/components/components.kv

#: import UserManagerScreen app.screens.user_management.user_management_scr.UserManagerScreen
#: include app/screens/user_management/UserManagerScreen.kv

#: import CollectionScreen app.screens.collection.collection_scr.CollectionScreen
#: include app/screens/collection/CollectionScreen.kv

#: import ProdsScreen app.screens.product.product_list.products_scr.ProdsScreen
#: include app/screens/product/product_list/ProdsScreen.kv

#: import ProdScreen app.screens.product.single_product.product_scr.ProdScreen
#: include app/screens/product/single_product/ProdScreen.kv

#: import AddProdScreen app.screens.product.add_product.add_product_scr.AddProdScreen
#: include app/screens/product/add_product/AddProdScreen.kv

#: import ListScreen app.screens.list.list_scr.ListScreen
#: include app/screens/list/ListScreen.kv

#: import ListScreen app.screens.list.add_product.add_to_list_scr.AddToListScreen
#: include app/screens/list/add_product/AddToListScreen.kv

#: import ManageDataScreen app.screens.product.manage_data.manage_data_scr.ManageDataScreen
#: include app/screens/product/manage_data/ManageDataScreen.kv

#: import ManageDataScreen app.screens.product.manage_data.category.category_scr.CategoryScreen
#: include app/screens/product/manage_data/category/CategoryScreen.kv

#: import ManageDataScreen app.screens.product.manage_data.unit.unit_scr.UnitScreen
#: include app/screens/product/manage_data/unit/UnitScreen.kv

MainScreen:

<MainScreen>:
    md_bg_color: app.theme_cls.secondaryContainerColor
    MDTopAppBar:
        id: top_bar
        type: 'medium'
        pos_hint: {'top': 1}
        size_hint_y: .12
        theme_bg_color: 'Custom'
        md_bg_color: app.theme_cls.primaryColor

        MDTopAppBarLeadingButtonContainer:
            padding: dp(10), dp(20), 0, dp(10)
            MDActionTopAppBarButton:
                id: top_bar_left_btn
                theme_icon_color: 'Custom'
                icon_color: 'white'

        MDTopAppBarTitle:
            id: top_bar_name
            text: ''
            padding: dp(25), dp(5), 0, 0
            theme_text_color: 'Custom'
            text_color: 'white'

        MDTopAppBarTrailingButtonContainer:
            padding: 0, dp(20), dp(10), dp(10)
            MDActionTopAppBarButton:
                id: top_bar_right_btn
                theme_icon_color: 'Custom'
                icon_color: 'white'


    MDNavigationLayout:
        MDScreenManager:
            id: scr_manager
            UserManagerScreen:
                top_bar: top_bar
            ProdsScreen:
                top_bar_height: top_bar.height
            CollectionScreen:
                top_bar_height: top_bar.height
            ListScreen:
                top_bar_height: top_bar.height
            AddToListScreen:
                top_bar_height: top_bar.height
            ManageDataScreen:
                top_bar_height: top_bar.height
            CategoryScreen:
                top_bar_height: top_bar.height
            UnitScreen:
                top_bar_height: top_bar.height
            AddProdScreen:
                top_bar_height: top_bar.height
            ProdScreen:
                top_bar: top_bar
                top_bar_height: top_bar.height

        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            enable_swiping: False

            MDNavigationDrawerMenu:
                MDNavigationDrawerHeader:
                    orientation: 'vertical'
                    padding: 0, 0, 0, '12dp'
                    adaptive_height: True

                    MDLabel:
                        id: nav_user_name
                        text: ''
                        theme_text_color: 'Custom'
                        theme_line_height: 'Custom'
                        text_color: '#4a4939'
                        adaptive_height: True
                        padding: dp(16), 0, dp(16), 0
                        font_style: 'Display'
                        role: 'small'

                    MDLabel:
                        id: nav_email
                        text: ''
                        padding: dp(16), 0, dp(16), 0
                        adaptive_height: True
                        font_style: 'Title'
                        role: 'medium'

                MDNavigationDrawerDivider:
                MDNavigationDrawerItem:
                    on_press:
                        nav_drawer.set_state('close')
                        app.unset_app_user()
                    MDNavigationDrawerItemLeadingIcon:
                        icon: 'logout-variant'
                        theme_icon_color: 'Custom'
                        icon_color: '#4a4939'
                    MDNavigationDrawerItemText:
                        text: 'Logout'
                        theme_text_color: 'Custom'
                        text_color: '#4a4939'

                MDNavigationDrawerDivider:
                MDNavigationDrawerItem:
                    on_press:
                        nav_drawer.set_state('close')
                        app.change_screen_and_update_bar('products_list_scr')
                    MDNavigationDrawerItemLeadingIcon:
                        icon: 'food-drumstick-outline'
                        theme_icon_color: 'Custom'
                        icon_color: '#4a4939'
                    MDNavigationDrawerItemText:
                        text: 'Products'
                        theme_text_color: 'Custom'
                        text_color: '#4a4939'

                MDNavigationDrawerDivider:
                MDNavigationDrawerItem:
                    on_press:
                        nav_drawer.set_state('close')
                        app.change_screen_and_update_bar('collection_scr')
                    MDNavigationDrawerItemLeadingIcon:
                        icon: 'list-box-outline'
                        theme_icon_color: 'Custom'
                        icon_color: '#4a4939'
                    MDNavigationDrawerItemText:
                        text: 'Shopping Lists'
                        theme_text_color: 'Custom'
                        text_color: '#4a4939'

        MDBottomSheet:
            id: bottom_sheet
            size_hint: 1, None
            md_bg_color: app.theme_cls.secondaryContainerColor
            height: content_list.height + handle.height * 1.5
            enable_swiping: False
            on_close: app.clean_bottom_sheet()

            BottomSheetHandleContainer:
                id: handle

            Spacer:
                orientation: 'vertical'
                value: dp(60)

            MDBoxLayout:
                orientation: 'vertical'
                padding: dp(5)
                id: sheet_content
                MDList:
                    spacing: dp(10)
                    id: content_list


