#: import Spacer components.components.Spacer


<UserManagerScreen>:
    name: 'usr_manager_scr'
    MDFloatLayout:
        orientation: 'vertical'
        md_bg_color: 'lightseagreen'

        MDBoxLayout:
            md_bg_color: 'white'
            orientation: 'vertical'
            pos_hint: {'center_x': .5, 'center_y': .5}
            size_hint: .85, .70

            MDBoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: self.children[0].height

                SelectSignInSignUpButton:
                    id: login_btn
                    text: 'Log In'
                    on_release:
                        root.switch_scr(self)

                Spacer:
                    orientation: 'horizontal'
                    value: self.parent.width * 0.01

                SelectSignInSignUpButton:
                    id: register_btn
                    text: 'Register'
                    on_release:
                        root.switch_scr(self)

            MDScreenManager:
                id: signin_signup_manager
                LoginScr:
                RegisterScr:


<SelectSignInSignUpButton@MDFlatButton>:
    size_hint_x: None
    width: self.parent.width * 0.49
    md_bg_color_disabled: app.theme_cls.accent_dark
    font_style: 'Button'
    disabled_color: 'white'
    theme_text_color: 'Custom'
    text_color: app.theme_cls.primary_color


<LoginScr>:
    name: 'log_in_scr'
    MDBoxLayout:
        md_bg_color: 'white'
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(15)

        MDTextField:
            id: enter_user
            multiline: False
            write_tab: False
            icon_left: 'account-outline'
            hint_text: 'Username'
            pos_hint: {'center_x': .5}
            on_text: app.validate_text_field(self)

        PasswordField:
            id: enter_pass
            hint_txt: 'Password'

        Spacer:
            orientation: 'vertical'
            value: dp(20)

        MDRaisedButton:
            text: 'Log in'
            pos_hint: {'center_x': .5}
            size_hint_x: .75
            on_release:
                if root.sign_in(enter_user, enter_pass) : app.set_app_user(root.user_data), app.init_landing_screen()

        Spacer:
            orientation: 'vertical'
            value: dp(10)

        MDRoundFlatIconButton:
            pos_hint: {'center_x': .5}
            size_hint_x: .75
            text: 'Sign in with google'
            icon: 'google'
            text_color: 'white'
            md_bg_color: 'black'

        MDLabel:
            text: ''


<RegisterScr>
    name: 'register_scr'
    MDBoxLayout:
        md_bg_color: 'white'
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(15)

        MDTextField:
            id: create_email
            multiline: False
            write_tab: False
            icon_left: 'email-outline'
            hint_text: 'Email'
            pos_hint: {'center_x': .5}
            helper_text: "Not a valid email"
            helper_text_mode: "on_error"
            on_text: app.validate_text_field(self)

        MDTextField:
            id: create_user
            multiline: False
            write_tab: False
            icon_left: 'account-outline'
            hint_text: 'Username'
            pos_hint: {'center_x': .5}
            on_text: app.validate_text_field(self)

        PasswordField:
            id: create_pass
            hint_txt: 'Password'

        Spacer:
            orientation: 'vertical'
            value: dp(10)

        MDRaisedButton:
            icon_left: 'account-outline'
            text: 'Sign Up'
            pos_hint: {'center_x': .5}
            size_hint_x: .75
            on_release:
                if root.sign_up(create_user, create_email, create_pass) : app.set_app_user(root.user_data), app.init_landing_screen()

        MDLabel:
            text: ''



<PasswordField@MDRelativeLayout>:
    size_hint_y: None
    height: text_field.height
    value: text_field.text

    MDTextField:
        id: text_field
        multiline: False
        write_tab: False
        hint_text: root.hint_txt
        password: True
        icon_left: "key-variant"
        on_text: app.validate_text_field(self)

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: text_field.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            text_field.password = False if text_field.password is True else True

