#: import Spacer components.components.Spacer
#: import SelectSignInSignUpButton components.components.SelectSignInSignUpButton

#: import LOGIN_SCR utils.constants.LOGIN_SCR
#: import REGISTER_SCR utils.constants.REGISTER_SCR


<UserManagerScreen>:
    name: 'usr_manager_scr'
    MDFloatLayout:
        orientation: 'vertical'
        md_bg_color: app.theme_cls.secondaryContainerColor

        MDBoxLayout:
            md_bg_color: app.theme_cls.secondaryContainerColor
            orientation: 'vertical'
            pos_hint: {'center_x': .5, 'center_y': .5}
            size_hint: .85, .70

            MDSegmentedButton:
                type:'large'
                MDSegmentedButtonItem:
                    on_release: root.switch_scr(LOGIN_SCR)
                    active: True
                    MDSegmentButtonLabel:
                        text: 'Log in'
                MDSegmentedButtonItem:
                    on_release: root.switch_scr(REGISTER_SCR)
                    MDSegmentButtonLabel:
                        text: 'Register'

            MDScreenManager:
                id: signin_signup_manager
                LoginScr:
                    top_bar: root.top_bar
                RegisterScr:
                    top_bar: root.top_bar


<LoginScr>:
    name: 'log_in_scr'
    MDBoxLayout:
        md_bg_color: app.theme_cls.tertiaryContainerColor
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(15)

        MDTextField:
            id: enter_user
            mode: 'filled'
            multiline: False
            write_tab: False
            MDTextFieldLeadingIcon:
                icon: 'account-outline'
            MDTextFieldHintText:
                text: 'Username'

        PasswordField:
            id: enter_pass
            hint_txt: 'Password'

        Spacer:
            orientation: 'vertical'
            value: dp(20)

        MDButton:
            type: 'tonal'
            pos_hint: {'center_x': .5}
            size_hint_x: .75
            on_release: root.perform_login()

            MDButtonText:
                text: 'Log in'

        Spacer:
            orientation: 'vertical'
            value: dp(10)


        MDLabel:
            text: ''


<RegisterScr>
    name: 'register_scr'
    MDBoxLayout:
        md_bg_color: app.theme_cls.tertiaryContainerColor
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(15)

        MDTextField:
            id: create_email
            pos_hint: {'center_x': .5}
            mode: 'filled'
            multiline: False
            write_tab: False
            MDTextFieldLeadingIcon:
                icon: 'email-outline'
            MDTextFieldHintText:
                text: 'Email'
            MDTextFieldHelperText:
                text: 'Not a valid email'
                mode: 'on_error'


        MDTextField:
            id: create_user
            pos_hint: {'center_x': .5}
            mode: 'filled'
            multiline: False
            write_tab: False
            MDTextFieldLeadingIcon:
                icon: 'account-outline'
            MDTextFieldHintText:
                text: 'Username'


        PasswordField:
            id: create_pass
            hint_txt: 'Password'

        Spacer:
            orientation: 'vertical'
            value: dp(10)

        MDButton:
            type: 'tonal'
            pos_hint: {'center_x': .5}
            size_hint_x: .75
            on_release: root.perform_register()

            MDButtonText:
                text: 'Register'

        MDLabel:
            text: ''


<PasswordField>:
    mode: 'filled'
    multiline: False
    write_tab: False

    MDTextFieldHintText:
        text: root.hint_txt

    MDTextFieldLeadingIcon:
        icon: "key-variant"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
#        on_release:
#            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
