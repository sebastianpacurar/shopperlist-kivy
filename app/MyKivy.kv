#: import UserManagerScreen screens.user_management.user_management_scr.UserManagerScreen
#: include screens/user_management/UserManagerScreen.kv

#: import CollectionScreen screens.collection.collection_scr.CollectionScreen
#: include screens/collection/CollectionScreen.kv

#: import ProdScreen screens.product.product_list.products_scr.ProdsScreen
#: include screens/product/product_list/ProdsScreen.kv

#: import ProdScreen screens.product.single_product.product_scr.ProdScreen
#: include screens/product/single_product/ProdScreen.kv

#: import AddProdScreen screens.product.add_product.add_product_scr.AddProdScreen
#: include screens/product/add_product/AddProdScreen.kv

MainScreen:

<MainScreen>:
    MDTopAppBar:
        id: top_bar
        pos_hint: {'top': 1}
        elevation: 2
        left_action_items: [['menu', lambda _: nav_drawer.set_state('open')]]

    MDNavigationLayout:
        MDScreenManager:
            id: scr_manager

            UserManagerScreen:

            ProdsScreen:

            CollectionScreen:

            MDScreen:
                name: 'list_content_scr'
                MDFloatLayout:
                    size_hint_y: .85
                    RV:
                        viewclass: 'ProdItemWithImg'
                        id: rv_list_content


            MDScreen:
                name: 'add_category_scr'
                MDFloatLayout:
                    MDTextField:
                        id: category_name_text
                        size_hint_x: .8
                        pos_hint: {'center_x': .5, 'y': .75}
                        hint_text: 'Name'
                        helper_text: 'Cannot be empty'
                        required: True
                        multiline: False

            MDScreen:
                name: 'add_unit_scr'
                MDFloatLayout:
                    MDTextField:
                        id: category_name_text
                        size_hint_x: .8
                        pos_hint: {'center_x': .5, 'y': .75}
                        hint_text: 'Name'
                        helper_text: 'Cannot be empty'
                        required: True
                        multiline: False

            AddProdScreen:

            ProdScreen:
                top_bar: top_bar


        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)

            MDNavigationDrawerMenu:
                MDNavigationDrawerHeader:
                    id: nav_drawer_header
                    spacing: dp(10)
                    padding: dp(12), 0, 0, dp(50)

                MDNavigationDrawerLabel:
                    text: 'User'

                MDNavigationDrawerItem:
                    text: 'Logout'
                    icon: 'logout-variant'
                    on_press: app.unset_app_user()

                MDNavigationDrawerLabel:
                    text: 'Shopping'

                MDNavigationDrawerItem:
                    text: 'Products'
                    icon: 'food-drumstick-outline'
                    on_press:
                        nav_drawer.set_state('close')
                        app.change_screen_and_update_bar('products_list_scr')

                MDNavigationDrawerItem:
                    text: 'Shopping Lists'
                    icon: 'list-box-outline'
                    on_press:
                        nav_drawer.set_state('close')
                        app.change_screen_and_update_bar('collection_scr')
